(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(675)}])},675:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(5893),r=s(7294),l=s(5733),c=s.n(l);let n=null;async function d(){if(n)return console.log("Returning cached data."),n;console.log("Fetching and parsing new data...");let e="https://corsproxy.io/?"+encodeURIComponent("https://www.retailys.cz/wp-content/uploads/astra_export_xml.zip"),t=await fetch(e);if(!t.ok)throw Error("HTTP error fetching ZIP! status: ".concat(t.status));let s=await t.blob(),a=(await new(c())().loadAsync(s)).file("export_full.xml");if(!a)throw Error("export_full.xml not found in the ZIP archive.");let r=await a.async("string"),l=new DOMParser().parseFromString(r,"application/xml");if(l.querySelector("parsererror"))throw Error("Failed to parse XML.");let d=l.querySelector("items");if(!d)throw Error("<items> tag not found in XML.");let i=new Set;return n={products:Array.from(d.querySelectorAll(":scope > item")).map((e,t)=>{let s=t=>e.getAttribute(t)||"",a=e=>parseFloat(s(e))||0,r=e=>"true"===s(e),l=s("brand")||"Nezn\xe1m\xe1";"Nezn\xe1m\xe1"!==l&&i.add(l);let c=Array.from(e.querySelectorAll("descriptions > description")).map(e=>({title:e.getAttribute("title")||"",html:e.textContent||""})),n=Array.from(e.querySelectorAll("parameters > parameter")).map(e=>{var t,s;return{name:(null===(t=e.querySelector("name"))||void 0===t?void 0:t.textContent)||"",value:(null===(s=e.querySelector("value"))||void 0===s?void 0:s.textContent)||""}}),d=Array.from(e.querySelectorAll("gallery > photo")).map(e=>e.textContent||""),o=Array.from(e.querySelectorAll("related > item")).map(e=>({name:e.getAttribute("name")||"",code:e.getAttribute("code")||""})),m=Array.from(e.querySelectorAll("alternative > item")).map(e=>({name:e.getAttribute("name")||"",code:e.getAttribute("code")||""})),h=Array.from(e.querySelectorAll("accessories > item")).map(e=>({name:e.getAttribute("name")||"",code:e.getAttribute("code")||""})),x=Array.from(e.querySelectorAll("parts > part > item")).map(e=>({name:e.getAttribute("name")||"",code:e.getAttribute("code")||""}));return{id:t,name:s("name")||"N/A",code:s("code"),brand:l,image:s("image")||"https://placehold.co/600x400/e2e8f0/4a5568?text=No+Image",photoGallery:[s("image"),...d].filter(Boolean),inStock:r("stock"),isNew:r("new"),weight:a("weight"),length:a("length"),width:a("width"),height:a("height"),prices:{czk:a("czk"),eur:a("eur"),czksmap:a("czksmap"),eursmap:a("eursmap")},dates:{created:s("created"),changed:s("changed")},descriptions:c,parameters:n,related:o,alternative:m,accessories:h,spareParts:x,hasSpareParts:x.length>0}}),brands:["",...Array.from(i).sort()]}}let i=e=>{let{path:t,className:s="w-6 h-6"}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:s,children:(0,a.jsx)("path",{d:t})})},o={search:(0,a.jsx)(i,{path:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),wrench:(0,a.jsx)(i,{path:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}),price:(0,a.jsx)(i,{path:"M11.5 15h1v2h-1v-2zm0-6h1v5h-1V9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),specs:(0,a.jsx)(i,{path:"M9 21H7a2 2 0 01-2-2V5a2 2 0 012-2h10a2 2 0 012 2v14a2 2 0 01-2 2h-2m-6-16v16"}),desc:(0,a.jsx)(i,{path:"M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"}),link:(0,a.jsx)(i,{path:"M17 7h-4v2h4c1.1 0 2 .9 2 2s-.9 2-2 2h-4v2h4c2.21 0 4-1.79 4-4s-1.79-4-4-4zM7 9h4V7H7c-2.21 0-4 1.79-4 4s1.79 4 4 4h4v-2H7c-1.1 0-2-.9-2-2s.9-2 2-2z"})},m=e=>{let{filters:t,brands:s,onFilterChange:r}=e;return(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:o.search}),(0,a.jsx)("input",{type:"text",placeholder:"Hledat...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:t.searchTerm,onChange:e=>r("searchTerm",e.target.value)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Značka"}),(0,a.jsx)("select",{value:t.brand,onChange:e=>r("brand",e.target.value),className:"w-full p-2 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:s.map(e=>(0,a.jsx)("option",{value:e,children:e||"Všechny značky"},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("label",{className:"flex items-center p-2 bg-gray-100 rounded-md",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:t.inStock,onChange:e=>r("inStock",e.target.checked)}),(0,a.jsx)("span",{className:"ml-2",children:"Skladem"})]}),(0,a.jsxs)("label",{className:"flex items-center p-2 bg-gray-100 rounded-md",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:t.hasSpareParts,onChange:e=>r("hasSpareParts",e.target.checked)}),(0,a.jsx)("span",{className:"ml-2",children:"N\xe1hradn\xed d\xedly"})]}),(0,a.jsxs)("label",{className:"flex items-center p-2 bg-gray-100 rounded-md",children:[(0,a.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded",checked:t.isNew,onChange:e=>r("isNew",e.target.checked)}),(0,a.jsx)("span",{className:"ml-2",children:"Novinka"})]})]})]})},h=e=>{let{products:t,selectedProduct:s,onProductSelect:r}=e;return(0,a.jsx)("div",{className:"overflow-y-auto flex-grow custom-scrollbar",children:(0,a.jsxs)("ul",{children:[t.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full text-left p-4 border-l-4 ".concat((null==s?void 0:s.id)===e.id?"bg-blue-50 border-blue-500":"border-transparent hover:bg-gray-100"),children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.code})]})},e.id)),0===t.length&&(0,a.jsx)("p",{className:"p-4 text-center text-gray-500",children:"Ž\xe1dn\xe9 produkty neodpov\xeddaj\xed filtrům."})]})})},x=e=>{let{title:t,items:s,allProducts:r,onProductSelect:l}=e;if(!s||0===s.length)return null;let c=e=>{let t=r.find(t=>t.code===e);t&&l(t)};return(0,a.jsxs)("div",{className:"details-section mt-8",children:[(0,a.jsxs)("h3",{children:[o.link,t]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>c(e.code),className:"p-3 bg-gray-50 rounded-lg hover:bg-blue-100 hover:shadow-md transition-all text-left",children:[(0,a.jsx)("p",{className:"font-semibold text-sm text-blue-700",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.code})]},t))})]})},u=e=>{let{product:t,allProducts:s,onProductSelect:l}=e,[c,n]=r.useState(0);r.useEffect(()=>{n(0)},[t]);let d=(0,r.useMemo)(()=>t?t.descriptions.reduce((e,t)=>{e[t.title]||(e[t.title]=[]);let s=t.html.replace(/<\/?font[^>]*>/g,"");return e[t.title].push(s),e},{}):{},[t]);return t?(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-4xl font-bold text-gray-900",children:t.name}),(0,a.jsxs)("p",{className:"text-lg text-gray-500 mt-1",children:["Značka: ",t.brand," | K\xf3d: ",t.code]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[t.isNew&&(0,a.jsx)("span",{className:"badge bg-blue-100 text-blue-800",children:"Novinka"}),t.inStock&&(0,a.jsx)("span",{className:"badge bg-green-100 text-green-800",children:"Skladem"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:t.photoGallery[c]||t.image,alt:t.name,className:"w-full h-auto object-cover rounded-lg shadow-lg cursor-pointer",onClick:()=>{t&&0!==t.photoGallery.length&&n(e=>(e+1)%t.photoGallery.length)},onError:e=>{e.target.src="https://placehold.co/600x400/e2e8f0/4a5568?text=Image+Error"}}),t.photoGallery.length>1&&(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 text-white bg-black bg-opacity-50 px-2 py-1 rounded-full text-sm",children:[c+1," / ",t.photoGallery.length]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"details-section mb-6",children:[(0,a.jsxs)("h3",{children:[o.price,"Ceny"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-100 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Cena (CZK)"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[t.prices.czk.toLocaleString("cs-CZ")," Kč"]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-100 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Cena (EUR)"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["€",t.prices.eur.toLocaleString("de-DE")]})]})]})]}),(0,a.jsxs)("div",{className:"details-section",children:[(0,a.jsxs)("h3",{children:[o.wrench,"N\xe1hradn\xed d\xedly"]}),t.hasSpareParts?(0,a.jsx)("ul",{className:"space-y-2 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:t.spareParts.map((e,t)=>(0,a.jsx)("li",{className:"flex p-2 bg-gray-50 rounded-md",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-700",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.code})]})},t))}):(0,a.jsx)("p",{className:"text-gray-500",children:"Nejsou uvedeny ž\xe1dn\xe9 n\xe1hradn\xed d\xedly."})]})]})]}),(0,a.jsxs)("div",{className:"details-section mb-8",children:[(0,a.jsxs)("h3",{children:[o.desc,"Popis"]}),(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(d).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-lg mb-2",children:t}),s.map((e,t)=>(0,a.jsx)("div",{className:"prose-content text-gray-600",dangerouslySetInnerHTML:{__html:e}},t))]},t)})})]}),(0,a.jsxs)("div",{className:"details-section mb-8",children:[(0,a.jsxs)("h3",{children:[o.specs,"Specifikace"]}),(0,a.jsx)("table",{className:"w-full text-sm text-left",children:(0,a.jsx)("tbody",{children:[...t.parameters,{name:"Hmotnost",value:"".concat(t.weight," kg")},{name:"Rozměry (D\xd7Š\xd7V)",value:"".concat(t.length,"\xd7").concat(t.width,"\xd7").concat(t.height," cm")},{name:"Datum vytvořen\xed",value:t.dates.created},{name:"Posledn\xed změna",value:t.dates.changed||"nezměněno"}].map((e,t)=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{scope:"row",className:"px-4 py-2 font-medium bg-gray-50 w-1/3",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.value})]},t))})})]}),(0,a.jsx)(x,{title:"Souvisej\xedc\xed produkty",items:t.related,allProducts:s,onProductSelect:l}),(0,a.jsx)(x,{title:"Alternativn\xed produkty",items:t.alternative,allProducts:s,onProductSelect:l}),(0,a.jsx)(x,{title:"Př\xedslušenstv\xed",items:t.accessories,allProducts:s,onProductSelect:l})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"Vyberte produkt"}),(0,a.jsx)("p",{children:"Zvolte produkt ze seznamu pro zobrazen\xed detailů."})]})})};function p(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[c,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[x,p]=(0,r.useState)("Initializing..."),[g,b]=(0,r.useState)(null),[j,f]=(0,r.useState)({searchTerm:"",brand:"",inStock:!1,hasSpareParts:!1,isNew:!1});(0,r.useEffect)(()=>{(async()=>{try{p("Nač\xedt\xe1n\xed a zpracov\xe1n\xed dat...");let{products:e,brands:s}=await d();t(e),l(s),e.length>0&&n(e[0])}catch(e){b(e.message)}finally{o(!1)}})()},[]);let y=(0,r.useMemo)(()=>e.filter(e=>(""===j.searchTerm||e.name.toLowerCase().includes(j.searchTerm.toLowerCase())||e.code.toLowerCase().includes(j.searchTerm.toLowerCase()))&&(""===j.brand||e.brand===j.brand)&&(!j.inStock||e.inStock)&&(!j.hasSpareParts||e.hasSpareParts)&&(!j.isNew||e.isNew)),[e,j]);return((0,r.useEffect)(()=>{y.length>0?c&&y.some(e=>e.id===c.id)||n(y[0]):n(null)},[y,c]),i)?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-blue-500 mx-auto"}),(0,a.jsx)("h2",{className:"mt-4 text-2xl font-semibold text-gray-700",children:x})]})}):g?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen bg-red-50",children:(0,a.jsxs)("div",{className:"p-8 bg-white rounded-lg shadow-md text-center max-w-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-red-600",children:"Chyba při nač\xedt\xe1n\xed dat"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:g})]})}):(0,a.jsxs)("div",{className:"flex flex-col md:flex-row h-screen font-sans antialiased bg-gray-50 text-gray-800",children:[(0,a.jsxs)("aside",{className:"w-full md:w-1/3 lg:w-1/4 h-full bg-white border-r border-gray-200 flex flex-col",children:[(0,a.jsxs)("header",{className:"p-4 border-b",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Produkty - Katalog"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Zobrazeno ",y.length," z ",e.length," produktů"]})]}),(0,a.jsx)(m,{filters:j,brands:s,onFilterChange:(e,t)=>{f(s=>({...s,[e]:t}))}}),(0,a.jsx)(h,{products:y,selectedProduct:c,onProductSelect:n})]}),(0,a.jsx)("main",{className:"w-full md:w-2/3 lg:w-3/4 p-4 md:p-8 overflow-y-auto custom-scrollbar",children:(0,a.jsx)(u,{product:c,allProducts:e,onProductSelect:n})})]})}}},function(e){e.O(0,[733,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);